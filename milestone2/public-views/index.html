<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sample Site</title>

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <style>
        body { padding-top:50px; }
    </style>
</head>
<body>

    <div class="container">
        <div class="jumbotron">
            <h1>Welcome to Iot-Project</h1>
            <h3>Please go to /pi for API and /ui for UI.</h3>
            <ul>
                <li>
                    <a href="/pi">/pi</a>
                </li>
                <li>
                        <a href="/ui">/ui</a>
                    </li>
                <!-- <li>
                    <a href="/api/ultra">/api/ultra</a>
                </li>
                <li>
                    <a href="/api/temp-hum">/api/temp-hum</a>
                </li> -->
            </ul>
            <br>
            <p>Made by Anders & Jesper</p>
        </div>
    </div>
    
    <script>
        // function subscribeToWs(url, msg) {
        //     var socket = new WebSocket(url);
    
        //     socket.onmessage = function (event) {
        //         console.log(event.data);
        //     };
        //     socket.onerror = function (error) {
        //         console.log('An error occurred while trying to connect to a Websocket!');
        //         console.log(error);
        //     };
        //     socket.onopen = function (event) {
        //         if (msg) {
        //             socket.send(msg);
        //         }
        //     };
        // }
        //subscribeToWs('ws://localhost:8484/pi/sensors/temperature');
        //subscribeToWs('ws://localhost:8484/things/coapDevice/sensors/co2');
        //subscribeToWs('ws://raspberrypi.local:8484/pi/sensors/pir');
        //subscribeToWs('ws://raspberrypi.local:8484/pi/sensors/temperature');

        // (function() {
        // // your page initialization code here
        // // the DOM will be available here
        // subscribeToWs('ws://raspberrypi.local:8080/pi/sensors/humidity');

        // })();
        //subscribeToWs('ws://raspberrypi.local:8080/api/pi/sensors/humidity');
        //subscribeToWs('ws://wot-pi.local:8484/pi/sensors/pir');
    </script>
  
</body>
</html>


<!---
  <script>
        function subscribeToWs(url, msg) {
            var socket = new WebSocket(url);
    
            socket.onmessage = function (event) {
                console.log(event.data);
            };
            socket.onerror = function (error) {
                console.log('An error occurred while trying to connect to a Websocket!');
                console.log(error);
            };
            socket.onopen = function (event) {
                if (msg) {
                    socket.send(msg);
                }
            };
        }
        //subscribeToWs('ws://localhost:8484/pi/sensors/temperature');
        //subscribeToWs('ws://localhost:8484/things/coapDevice/sensors/co2');
        //subscribeToWs('ws://raspberrypi.local:8484/pi/sensors/pir');
        //subscribeToWs('ws://raspberrypi.local:8484/pi/sensors/temperature');
        subscribeToWs('ws://raspberrypi.local:8484/pi/sensors/humidity');
        //subscribeToWs('ws://wot-pi.local:8484/pi/sensors/pir');
    </script>


    var resources = JSON.parse(`{
	"pi": {
		"name": "WoT Pi",
		"description": "A simple WoT-connected Raspberry PI for the WoT book.",
		"port": 8080,
		"sensors": {
			"temperature": {
				"name": "Temperature Sensor",
				"description": "An ambient temperature sensor.",
				"unit": "celsius",
				"value": 0,
				"gpio": 12,
				"frequency": 5000
			},
			"humidity": {
				"name": "Humidity Sensor",
				"description": "An ambient humidity sensor.",
				"unit": "%",
				"value": 0,
				"gpio": 12,
				"frequency": 5000
			},
			"ultra": {
				"name": "Ultra Proximity Sensor",
				"description": "A proximity sensor.",
				"value": 0,
				"gpioOut": 23,
				"gpioIn": 24
			},
			"blinkingLed": {
				"name": "LED Blinking",
				"description": "A blinking led.",
				"value": false,
				"gpio": 4
			}
		},
		"actuators": {
			"leds": {
				"1": {
					"name": "LED 1",
					"value": false,
					"gpio": 2
				},
				"2": {
					"name": "LED 2",
					"value": false,
					"gpio": 22
				}
			}
		}
	}
}`);

function selectResouce(url) {
  console.log("t1")
	var parts = url.split('/');
 
  console.log("t2")
	
  parts.shift();
  console.log("t3")

	var result = resources;
  console.log("t4")
  //console.log(result)

	for (var i = 0; i < parts.length; i++) {
   console.log("t5")
   console.log(result[parts[i]])
		result = result[parts[i]];
	}
  console.log("t6")
  console.log(result)
	return result;
}

selectResouce('/pi/sensors/humidity');

-->